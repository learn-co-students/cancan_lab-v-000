exit
note
exit
end
redirect_to root_path
@note.update(note_params)
@note=Note.find_by(params[:id])
params
exit
note
post :update, id: note_id, note: {content: new_content, visible_to: 'alice'}
note_id
note
exit
Note.all.where(user_id:2)
note
post :update, id: note_id, note: {content: new_content, visible_to: 'alice'}
note
exit
@note.save
@note.persisted?
@note.update(note_params)
@note.persisted?
@note.content
exit
@note.persisted?
@note.content
note_params
exit
@note
exit
note
Note.all
note.readers
exit
note.readers == [alice]
note.readers
exit
self.readers 
exit
self.readers.exclude?(self.user)
self.readers.include?(self.user)
exit
self.readers << self.user
self.readers
user
exit
note.readers
exit
note.readers
exit
self.readers << self.user
self.readers
self.user 
exit
user
Note.all
Note
note
user
exit
self.readers.map{|r|r.name}.join(", ")
self.readers.map{|r|r.name}
self.readers.all.pluck(:id)
self.readers.pluck(:id)
self.readers.pluck('name')
self.readers.pluck(&:name)
self.readers.pluck(:name)
self.readers
self.readers.pluck(:name)
self.readers
